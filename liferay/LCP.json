{
  "kind": "Deployment",
  "id": "liferay",
  "image": "liferaycloud/liferay-dxp:7.2-4.0.5",
  "memory": 8192,
  "cpu": 8,
  "scale": 1,
  "ports": [
    {
      "port": 8080,
      "external": false
    }
  ],
  "readinessProbe": {
    "httpGet": {
      "path": "/c/portal/layout",
      "port": 8080
    },
    "initialDelaySeconds": 120,
    "periodSeconds": 15,
    "timeoutSeconds": 5,
    "failureThreshold": 3,
    "successThreshold": 1
  },
  "livenessProbe": {
    "httpGet": {
      "path": "/c/portal/layout",
      "port": 8080
    },
    "initialDelaySeconds": 480,
    "periodSeconds": 180,
    "timeoutSeconds": 15,
    "failureThreshold": 5,
    "successThreshold": 1
  },
  "publishNotReadyAddressesForCluster": true,
  "env": {
    "LCP_PROJECT_LIFERAY_CLUSTER_ENABLED": "true",
    "LIFERAY_JAVA_OPTS": "-Xms2048m -Xmx6144m"
  },
  "dependencies": [
    "database",
    "search"
  ],
  "volumes": {
    "data": "/opt/liferay/data"
  },
  "environments": {
    "infra": {
      "deploy": false
    },
    "prod": {
      "cpu": 12,
      "memory": 16384,
      "scale": 2,
      "env": {
        "LIFERAY_JAVA_OPTS": "-Xmx12288m -Xms8g -XX:NewSize=1536m -XX:MaxNewSize=1536m -XX:MaxMetaspaceSize=768m -XX:MetaspaceSize=768m",
        "LCP_PROJECT_MONITOR_DYNATRACE_TENANT": "why37695",
        "LCP_PROJECT_MONITOR_DYNATRACE_TOKEN": "@lcp-secret-dynatrace-token"
      }
    },
    "dr": {
      "cpu": 12,
      "memory": 16384,
      "scale": 2,
      "env": {
        "LIFERAY_JAVA_OPTS": "-Xmx12288m -Xms8g -XX:NewSize=1536m -XX:MaxNewSize=1536m -XX:MaxMetaspaceSize=768m -XX:MetaspaceSize=768m"
      }
    },
    "test": {
      "cpu": 12,
      "memory": 16384,
      "scale": 2,
      "env": {
        "LIFERAY_JAVA_OPTS": "-Xmx12288m -Xms8g -XX:NewSize=1536m -XX:MaxNewSize=1536m -XX:MaxMetaspaceSize=768m -XX:MetaspaceSize=768m"
      }
    }
  }
}